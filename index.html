<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyFestMap ‚Äî Your Festival Map</title>
    <meta name="description" content="Discover festivals, map your journey, share with friends. Your personal festival passport.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="MyFestMap ‚Äî Your Festival Map">
    <meta property="og:description" content="Discover festivals, map your journey, share with friends.">
    <meta property="og:type" content="website">
    
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Clerk Authentication (TODO: Add your publishable key) -->
    <script 
        async 
        crossorigin="anonymous"
        data-clerk-publishable-key="pk_test_YOUR_KEY_HERE"
        src="https://cdn.clerk.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
        type="text/javascript"
    ></script>
    <style>
        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-hover: #1a1a24;
            --accent: #00ff88;
            --accent-dim: #00cc6a;
            --accent-secondary: #00ccff;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --border: #2a2a3a;
            --gradient-1: linear-gradient(135deg, #00ff88 0%, #00ccff 100%);
            --gradient-discovery: linear-gradient(135deg, #00ccff 0%, #0099ff 100%);
            --gradient-mapping: linear-gradient(135deg, #00ff88 0%, #00cc66 100%);
            --gradient-sharing: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-dark); color: var(--text-primary); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        
        /* Header */
        header { 
            padding: 20px 0; 
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        .header-inner { display: flex; justify-content: space-between; align-items: center; }
        .logo { 
            font-family: 'Space Grotesk', sans-serif; 
            font-size: 1.5rem; 
            font-weight: 700; 
            color: var(--accent); 
            text-decoration: none; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        .logo-icon { 
            width: 36px; 
            height: 36px; 
            background: var(--gradient-1); 
            border-radius: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 20px; 
        }
        .nav-links { display: flex; gap: 8px; }
        .nav-link { 
            padding: 10px 16px; 
            background: var(--bg-card); 
            border: 1px solid var(--border); 
            border-radius: 8px; 
            color: var(--text-primary); 
            text-decoration: none; 
            font-size: 0.85rem; 
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .nav-link:hover { border-color: var(--accent); background: var(--bg-card-hover); }
        .nav-link.primary { 
            background: var(--accent); 
            border-color: var(--accent); 
            color: var(--bg-dark); 
        }
        .nav-link.primary:hover { opacity: 0.9; }
        
        /* Hero */
        .hero { 
            padding: 80px 0 60px; 
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(0, 255, 136, 0.03) 0%, transparent 50%);
            animation: pulse 15s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        .hero-content { position: relative; z-index: 1; }
        .hero-badge {
            display: inline-block;
            padding: 6px 16px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--accent);
            margin-bottom: 24px;
        }
        .hero h1 { 
            font-family: 'Space Grotesk', sans-serif; 
            font-size: 3.5rem; 
            font-weight: 700; 
            margin-bottom: 20px; 
            background: var(--gradient-1); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            line-height: 1.2;
        }
        .hero .tagline { 
            font-size: 1.35rem; 
            color: var(--text-secondary); 
            max-width: 600px; 
            margin: 0 auto 32px;
            line-height: 1.5;
        }
        .hero .tagline strong { color: var(--text-primary); font-weight: 600; }
        .hero-cta { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
        .hero-btn {
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .hero-btn.primary {
            background: var(--accent);
            color: var(--bg-dark);
        }
        .hero-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0, 255, 136, 0.3); }
        .hero-btn.secondary {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
        }
        .hero-btn.secondary:hover { border-color: var(--accent); }
        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 48px;
            padding-top: 32px;
            border-top: 1px solid var(--border);
        }
        .hero-stat {
            text-align: center;
        }
        .hero-stat .number {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
        }
        .hero-stat .label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        /* Three Pillars */
        .pillars {
            padding: 80px 0;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }
        .pillars-header {
            text-align: center;
            margin-bottom: 48px;
        }
        .pillars-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            margin-bottom: 12px;
        }
        .pillars-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        .pillars-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }
        .pillar {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .pillar:hover {
            transform: translateY(-4px);
            border-color: var(--accent);
        }
        .pillar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }
        .pillar.discovery::before { background: var(--gradient-discovery); }
        .pillar.mapping::before { background: var(--gradient-mapping); }
        .pillar.sharing::before { background: var(--gradient-sharing); }
        
        .pillar-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin: 0 auto 20px;
        }
        .pillar.discovery .pillar-icon { background: rgba(0, 204, 255, 0.15); }
        .pillar.mapping .pillar-icon { background: rgba(0, 255, 136, 0.15); }
        .pillar.sharing .pillar-icon { background: rgba(255, 107, 107, 0.15); }
        
        .pillar h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.4rem;
            margin-bottom: 12px;
        }
        .pillar.discovery h3 { color: #00ccff; }
        .pillar.mapping h3 { color: #00ff88; }
        .pillar.sharing h3 { color: #ff6b6b; }
        
        .pillar p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .pillar-features {
            text-align: left;
        }
        .pillar-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .pillar-feature .check {
            color: var(--accent);
            font-weight: bold;
        }
        .pillar-cta {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
        }
        .pillar.discovery .pillar-cta { background: rgba(0, 204, 255, 0.15); color: #00ccff; }
        .pillar.mapping .pillar-cta { background: rgba(0, 255, 136, 0.15); color: #00ff88; }
        .pillar.sharing .pillar-cta { background: rgba(255, 107, 107, 0.15); color: #ff6b6b; }
        .pillar-cta:hover { transform: translateY(-2px); }
        
        /* How It Works */
        .how-it-works {
            padding: 80px 0;
        }
        .how-header {
            text-align: center;
            margin-bottom: 48px;
        }
        .how-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            margin-bottom: 12px;
        }
        .how-header p {
            color: var(--text-secondary);
        }
        .how-steps {
            display: flex;
            justify-content: center;
            gap: 32px;
            flex-wrap: wrap;
        }
        .how-step {
            text-align: center;
            max-width: 200px;
        }
        .how-step-number {
            width: 48px;
            height: 48px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--bg-dark);
            margin: 0 auto 16px;
        }
        .how-step h4 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        .how-step p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        /* Festival Browser Section */
        .browse-section {
            padding: 60px 0;
            border-top: 1px solid var(--border);
        }
        .browse-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }
        .browse-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
        }
        .browse-header .count {
            color: var(--accent);
            font-size: 0.9rem;
        }
        
        /* Quick Filters */
        .filter-bar { 
            display: flex; 
            gap: 10px; 
            flex-wrap: wrap;
        }
        .filter-btn { 
            padding: 8px 16px; 
            background: var(--bg-card); 
            border: 1px solid var(--border); 
            border-radius: 20px; 
            color: var(--text-primary); 
            font-size: 0.8rem; 
            cursor: pointer; 
            transition: all 0.2s; 
        }
        .filter-btn:hover, .filter-btn.active { 
            background: var(--accent); 
            border-color: var(--accent); 
            color: var(--bg-dark); 
        }
        
        /* Festival Grid */
        .festival-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 16px; 
        }
        .festival-card { 
            background: var(--bg-card); 
            border: 1px solid var(--border); 
            border-radius: 12px; 
            padding: 20px; 
            transition: transform 0.2s, border-color 0.2s; 
            text-decoration: none; 
            color: inherit; 
            display: block; 
        }
        .festival-card:hover { 
            transform: translateY(-3px); 
            border-color: var(--accent); 
        }
        .festival-card .card-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: flex-start; 
            margin-bottom: 8px; 
        }
        .festival-card h3 { 
            font-family: 'Space Grotesk', sans-serif; 
            font-size: 1.1rem; 
            line-height: 1.3; 
        }
        .festival-card .score-badge { 
            background: rgba(0, 255, 136, 0.15); 
            padding: 4px 10px; 
            border-radius: 12px; 
            font-family: 'Space Grotesk', sans-serif; 
            font-weight: 700; 
            color: var(--accent); 
            font-size: 0.85rem; 
            white-space: nowrap; 
        }
        .festival-card .location { 
            color: var(--text-secondary); 
            font-size: 0.8rem; 
            margin-bottom: 12px; 
        }
        .festival-card .highlights { 
            display: flex; 
            gap: 6px; 
            flex-wrap: wrap; 
        }
        .festival-card .highlight { 
            padding: 3px 8px; 
            background: rgba(255,255,255,0.05); 
            border-radius: 10px; 
            font-size: 0.65rem; 
            color: var(--text-secondary); 
        }
        .festival-card .highlight.strong { 
            background: rgba(0, 255, 136, 0.1); 
            color: var(--accent); 
        }
        
        /* View All Link */
        .view-all {
            text-align: center;
            margin-top: 32px;
        }
        .view-all a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .view-all a:hover {
            text-decoration: underline;
        }
        
        /* Email Capture */
        .email-capture {
            padding: 60px 0;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            text-align: center;
        }
        .email-capture h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
            margin-bottom: 12px;
        }
        .email-capture p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .email-form {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 500px;
            margin: 0 auto;
        }
        .email-form input {
            flex: 1;
            min-width: 250px;
            padding: 14px 20px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
        }
        .email-form input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .email-form button {
            padding: 14px 28px;
            background: var(--accent);
            border: none;
            border-radius: 10px;
            color: var(--bg-dark);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .email-form button:hover {
            transform: translateY(-2px);
        }
        .email-note {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 12px;
        }
        
        /* Footer */
        footer { 
            padding: 40px 0; 
            border-top: 1px solid var(--border); 
            text-align: center; 
            color: var(--text-secondary); 
            font-size: 0.875rem; 
        }
        footer a { color: var(--accent); text-decoration: none; }
        
        /* Responsive */
        @media (max-width: 900px) {
            .pillars-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
                margin: 0 auto;
            }
        }
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .hero .tagline { font-size: 1.1rem; }
            .hero-stats { flex-direction: column; gap: 20px; }
            .nav-links { display: none; }
            .how-steps { flex-direction: column; align-items: center; }
            .browse-header { flex-direction: column; text-align: center; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-inner">
            <a href="/" class="logo">
                <span class="logo-icon">üó∫Ô∏è</span>
                MyFestMap
            </a>
            <nav class="nav-links">
                <a href="browse.html" class="nav-link">Browse Festivals</a>
                <a href="my-map.html" class="nav-link">üìç My Map</a>
                <a href="my-recap.html" class="nav-link">üìä My Recap</a>
                <a href="#" class="nav-link primary" id="auth-btn" onclick="handleAuthClick()">Sign In</a>
            </nav>
        </div>
    </header>
    
    <section class="hero">
        <div class="container hero-content">
            <div class="hero-badge">üé™ Your Festival Journey Starts Here</div>
            <h1>Your Festival Map</h1>
            <p class="tagline">
                <strong>Discover</strong> your next adventure. <strong>Map</strong> where you've been. 
                <strong>Share</strong> your journey with friends.
            </p>
            <div class="hero-cta">
                <a href="browse.html" class="hero-btn primary">
                    üîç Browse Festivals
                </a>
                <a href="my-map.html" class="hero-btn secondary">
                    üìç Start Your Map
                </a>
            </div>
            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="number">94</div>
                    <div class="label">Festivals</div>
                </div>
                <div class="hero-stat">
                    <div class="number">10</div>
                    <div class="label">Rating Criteria</div>
                </div>
                <div class="hero-stat">
                    <div class="number">‚àû</div>
                    <div class="label">Memories to Make</div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="pillars">
        <div class="container">
            <div class="pillars-header">
                <h2>Three Ways to Use MyFestMap</h2>
                <p>More than just a list ‚Äî it's your festival companion</p>
            </div>
            <div class="pillars-grid">
                <div class="pillar discovery">
                    <div class="pillar-icon">üîç</div>
                    <h3>Discovery</h3>
                    <p>Find festivals that match your vibe. Filter by what matters to you ‚Äî sound, scene, safety, or pure chaos.</p>
                    <div class="pillar-features">
                        <div class="pillar-feature"><span class="check">‚úì</span> 94 US festivals rated</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> 10-point scoring system</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> Filter by your priorities</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> Real reviews, not ads</div>
                    </div>
                    <a href="browse.html" class="pillar-cta">Browse Festivals ‚Üí</a>
                </div>
                
                <div class="pillar mapping">
                    <div class="pillar-icon">üìç</div>
                    <h3>Mapping</h3>
                    <p>Pin every festival you've attended. Watch your map fill up over the years. Build your festival passport.</p>
                    <div class="pillar-features">
                        <div class="pillar-feature"><span class="check">‚úì</span> Interactive US map</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> Track festivals by year</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> Wishlist future events</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> See your journey grow</div>
                    </div>
                    <a href="my-map.html" class="pillar-cta">Open My Map ‚Üí</a>
                </div>
                
                <div class="pillar sharing">
                    <div class="pillar-icon">üîó</div>
                    <h3>Sharing</h3>
                    <p>Compare your festival passport with friends. See who's been where. Plan your next adventure together.</p>
                    <div class="pillar-features">
                        <div class="pillar-feature"><span class="check">‚úì</span> Shareable profile links</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> Compare with friends</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> End-of-season Wrapped</div>
                        <div class="pillar-feature"><span class="check">‚úì</span> Social-ready graphics</div>
                    </div>
                    <a href="my-recap.html" class="pillar-cta">View My Recap ‚Üí</a>
                </div>
            </div>
        </div>
    </section>
    
    <section class="how-it-works">
        <div class="container">
            <div class="how-header">
                <h2>How It Works</h2>
                <p>Get started in 30 seconds</p>
            </div>
            <div class="how-steps">
                <div class="how-step">
                    <div class="how-step-number">1</div>
                    <h4>Browse</h4>
                    <p>Explore our database of 94 rated festivals</p>
                </div>
                <div class="how-step">
                    <div class="how-step-number">2</div>
                    <h4>Pin</h4>
                    <p>Mark festivals you've attended or want to go</p>
                </div>
                <div class="how-step">
                    <div class="how-step-number">3</div>
                    <h4>Share</h4>
                    <p>Compare your map with friends and flex your passport</p>
                </div>
            </div>
        </div>
    </section>
    
    <section class="browse-section" id="browse">
        <div class="container">
            <div class="browse-header">
                <div>
                    <h2>Browse Festivals</h2>
                    <span class="count">94 festivals in our database</span>
                </div>
                <div class="filter-bar">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="edm">EDM</button>
                    <button class="filter-btn" data-filter="rock">Rock</button>
                    <button class="filter-btn" data-filter="jam">Jam</button>
                    <button class="filter-btn" data-filter="camping">Camping</button>
                    <button class="filter-btn" data-filter="urban">Urban</button>
                </div>
            </div>
            
            <div class="festival-grid" id="festival-grid">
                <!-- Populated by JavaScript -->
            </div>
            
            <div class="view-all">
                <a href="festivals/">View all 94 festivals ‚Üí</a>
            </div>
        </div>
    </section>
    
    <section class="email-capture">
        <div class="container">
            <h2>Get Festival Updates</h2>
            <p>Be the first to know when new festivals are added and get exclusive pre-sale access from our partners.</p>
            <form class="email-form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST" onsubmit="handleEmailSubmit(event)">
                <input type="email" name="email" placeholder="your@email.com" required>
                <input type="hidden" name="_subject" value="MyFestMap Newsletter Signup">
                <button type="submit">Subscribe</button>
            </form>
            <p class="email-note">No spam, unsubscribe anytime. We may share relevant festival offers.</p>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <p>MyFestMap ‚Äî Built for festival lovers, by festival lovers.</p>
            <p style="margin-top: 8px; font-size: 0.8rem;">
                <a href="#">About</a> ¬∑ <a href="#">Contact</a> ¬∑ <a href="#">Privacy</a>
            </p>
        </div>
    </footer>
    
    <script>
        // Sample festival data - in production this would load from festivals/*.html
        const festivals = [
            { name: "EDC Las Vegas", location: "Las Vegas, NV", score: 47, genre: "edm", highlights: ["Sound", "Production", "Scale"] },
            { name: "Electric Forest", location: "Rothbury, MI", score: 46, genre: "edm", highlights: ["Scene", "Vibes", "Art"] },
            { name: "Coachella", location: "Indio, CA", score: 44, genre: "multi", highlights: ["Lineup", "Production", "Scene"] },
            { name: "Bonnaroo", location: "Manchester, TN", score: 43, genre: "multi", highlights: ["Camping", "Community", "Vibes"] },
            { name: "Burning Man", location: "Black Rock City, NV", score: 45, genre: "experience", highlights: ["Art", "Community", "Radical"] },
            { name: "Ultra Miami", location: "Miami, FL", score: 42, genre: "edm", highlights: ["Sound", "Production", "Energy"] },
            { name: "Lollapalooza", location: "Chicago, IL", score: 41, genre: "rock", highlights: ["Lineup", "Urban", "Variety"] },
            { name: "Outside Lands", location: "San Francisco, CA", score: 42, genre: "multi", highlights: ["Food", "Wine", "Vibes"] },
            { name: "Austin City Limits", location: "Austin, TX", score: 41, genre: "multi", highlights: ["Lineup", "Urban", "Food"] },
            { name: "Governors Ball", location: "New York, NY", score: 39, genre: "rock", highlights: ["Urban", "Lineup", "Access"] },
            { name: "Shambhala", location: "British Columbia", score: 46, genre: "edm", highlights: ["Sound", "Community", "Art"] },
            { name: "Lightning in a Bottle", location: "Bakersfield, CA", score: 44, genre: "edm", highlights: ["Wellness", "Art", "Community"] },
        ];
        
        function renderFestivals(filter = 'all') {
            const grid = document.getElementById('festival-grid');
            const filtered = filter === 'all' ? festivals : festivals.filter(f => f.genre === filter);
            
            grid.innerHTML = filtered.map(f => `
                <a href="festivals/${f.name.toLowerCase().replace(/\s+/g, '-')}.html" class="festival-card">
                    <div class="card-header">
                        <h3>${f.name}</h3>
                        <span class="score-badge">${f.score}/50</span>
                    </div>
                    <div class="location">üìç ${f.location}</div>
                    <div class="highlights">
                        ${f.highlights.map(h => `<span class="highlight strong">${h}</span>`).join('')}
                    </div>
                </a>
            `).join('');
        }
        
        // Filter click handlers
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderFestivals(btn.dataset.filter);
            });
        });
        
        // Email form handler
        function handleEmailSubmit(e) {
            e.preventDefault();
            const email = e.target.querySelector('input').value;
            // In production, this would submit to a backend
            alert('Thanks! You\'ll hear from us soon.');
            e.target.reset();
        }
        
        // Initial render
        renderFestivals();
        
        // Auth handling
        function handleAuthClick() {
            if (typeof Clerk !== 'undefined' && Clerk.isSignedIn) {
                // Show user menu or sign out
                Clerk.openUserProfile();
            } else if (typeof Clerk !== 'undefined') {
                // Open sign in modal
                Clerk.openSignIn();
            } else {
                alert('Authentication loading... please try again.');
            }
        }
        
        // Initialize Clerk when loaded
        window.addEventListener('load', async function() {
            if (typeof Clerk !== 'undefined') {
                try {
                    await Clerk.load();
                    updateAuthUI();
                } catch (err) {
                    console.log('Clerk not configured yet');
                }
            }
        });
        
        function updateAuthUI() {
            const authBtn = document.getElementById('auth-btn');
            if (Clerk.isSignedIn && Clerk.user) {
                authBtn.innerHTML = `<img src="${Clerk.user.imageUrl}" style="width:24px;height:24px;border-radius:50%;margin-right:6px;"> ${Clerk.user.firstName || 'Account'}`;
            }
        }
        
        // Email form handling
        function handleEmailSubmit(e) {
            const form = e.target;
            const email = form.querySelector('input[type="email"]').value;
            
            // If Formspree isn't configured, just show success
            if (form.action.includes('YOUR_FORM_ID')) {
                e.preventDefault();
                localStorage.setItem('myfestmap_email', email);
                alert('Thanks for subscribing! üéâ');
                form.reset();
                return;
            }
            // Otherwise let the form submit normally to Formspree
        }
    </script>
    
    <!-- MyFestMap Auth Module -->
    <script src="js/auth.js"></script>
</body>
</html>
